# Patika-Veri-Bilimi-Veri-Analitigi-Odevler
1-) One hot encoding modelin görmediği veriye nasıl uygulanır?
Training datasetini encode ettiğimiz şekilde test ya da validation (modelin görmediği veri seti) aşağıdaki gibi get_dummies (pandas) methoduyla encode edilebilir. Inner kullanılırsa modelin görmediği veri setinde az kolon olduğunda test ve validation az kolon sayısına göre encode edilir.
one_hot_encoded_train = pd.get_dummies(train) one_hot_encoded_test = pd.get_dummies(test) final_train, final_test = one_hot_encoded_train.align(one_hot_encoded_test, join='inner',axis=1)

OneHotEnconder (sklearn) methodu makine öğrenmesi çalışmalarının daha tutarlı ve uygun sonuçlar verdiği düşünülmektedir. Bunun nedenleri bu method str türünde kategorik veri alırken (0.20.0 version) int türünde de kategorik veri almaktadır. Türleri dönüştürmekle uğraşmak gerekmez. Ayrıca modelin görmediği veriye de uygulanabilir. handle_unknown="ignore" dendiğinde yeni karşılaşılan kategori gördüğünde varolan kategorilerde satıra 0 yazarak döner. handle_unknown="error" methoduyla farklı kategori çıkması imkansız ve uyarı alınması gerekn bir durumsa bu methodla kontrol yapılabilir.sparse=False methoduyla matris şeklinde çıktılar alabiliriz.
encoder = OneHotEncoder(handle_unknown="ignore") encoder.fit(X_train) X_train = encoder.transform(X_train) X_test = encoder.transform(X_test)

2-) Labelencoding'de ilgili kolon için ölçeklendirme nasıl yapılır? (Verinin doğru etkisiyle sayısal olarak dönüştürülmesi)
Lable encoding One hot encodinge göre ordinal kategorik olan değişkenlerde daha iyi sonuç vermektedir. Fakat LabelEncoder() fonksiyonu str olan veriyi alfabetik olarak encode ettiğinden ordinal sıraya uyulmayabilir. Ayrıca 'low, high, low, mid' gibi olan datayı [0,1,0,2] şeklinde encode ettiğinden yanlış sonuçlara varılabilir. Validation kısmında aynı kategori için aynı sayının kullanılması için fit, transform fonksiyonları kullanılabilir.
3-) Imbalance datasette train test split yaparken neleri göz önünde bulundurmalıyız?
Random sampling methodu her bir elemanın bir kategori için seçilme olasılığının eşit olduğu durumlarda tercih edilmelidir. Yani Imbalanced veri setinde Random sampling methodu kullanılmamalıdır. Stratified sampling Imbalanced veri seti için kullanılabilecek bir methoddur. Her bir kategori için belirlenen orana bakarak seçimin iki grupta da bu orana uymasını sağlar.

Sampling methodu uygulanacak ise train ve test veri setleri ayrılmalı ve daha sonra train seti oversampling veya undersampling yapılmalıdır.

4-) Validation dataseti (modelin görmediği) nasıl oluşturulur ve nasıl predict etmeye hazır hale getirilir?
Elimizdeki veri setini alıp son dönemdeki verileri validation için kullanabiliriz. Sanki o veri seti gelecekteki veriymiş gibi yaparak sonuç alınmış olur. Predict ederken de normal verimde değiştirdiğim kolonlar ve dropladığım kolonları değiştirmeli ve droplamalıyım. Encode işlemi yaptıysam validation datasında da encode işleminin aynı şekilde encode edildiğinden emin olmalıyım. Yukarıdaki örneğe bakılabilir.
5-) predict_proba metoduyla oran nasıl hesaplanır ve treshold nasıl değiştirilir?
Predict methodu verinin fraud olması (1) ya da olmaması(0) sonucunu dönmektedir. Predict_proba ise fraud olması (1) ya da olmaması(0) değerlerinin % olarak oranını vermektedir. Kanser olma gibi kesinlik gerektiren bir çalışma üzerinde çalışılınıyorsa predict_proba methodu kullanılabilir. Ayrıca 1 ve 0 deme yüzdesi belirtilerek threshold uygulanabilir. Yukarıda uygulaması gösterilmiştir.
6-) Fraud case'i üzerinde train&test&validation split, encoding, scaling,modelleme çalışmaları Python'da yapılarak, modelin görmediği dataset üzerinde başarılı sonuç alacak bir model örneği yapılmalı.
Yukarıdaki örnekte derste işlenen kod alınmıştır. Üzerinde auto_model kategori birleştirme işlemi yapılmıştır.(one hot encoder 15 ve altı kategoride daha iyi çalışabildiğinden) Unique olan insured_zip kolonu atılmıştır.Location her veri için farklı olabilmesinden atılmıştır. Oversampling methodu sadece train setine uygulanmıştır. (Test setinin oversample ya da undersample edilmemesi sadece train setinde samplling yapılmasının daha iyi olduğu araştırılmıştır.) StratifiedShuffleSplit methodu ile split işlemi yapılmak istenmiş ama yapılamamıştır. Oversample ve undersample belli oranlarda beraber kullanılmak istenmiş fakat bu modelin doğruluğuna çokta etki etmediğinden vazgeçilmiştir.
